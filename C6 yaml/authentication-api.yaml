openapi: 3.0.3
info:
  title: Autentica√ß√£o
  version: 1.1.0

  description: |-

    ## O que √©?
    ________________

    Para garantir maior seguran√ßa em nossos servi√ßos, temos um processo de autoriza√ß√£o que confirma a identidade de quem est√° tentando se autenticar em nossas APIs, assegurando que ela corresponde ao destinat√°rio das credenciais enviadas.

    Ela √© baseada no protocolo OAuth2 para autentica√ß√£o e autoriza√ß√£o seguras, permitindo que aplica√ß√µes acessem dados do usu√°rio sem expor nenhuma informa√ß√£o.
    Se houver sucesso, um token de acesso √© fornecido para interagir com nossos outros recursos.

    <br>

    ## Autentica√ß√£o via Certificado Digital
    ________________

    Nossas APIs requerem TLS m√∫tuo (mTLS), que √© uma forma de autentica√ß√£o m√∫tua entre cliente e servidor, que garante a autenticidade de ambas as partes de uma conex√£o de rede (cliente e servidor).
    Verificando se os dois possuem a chave privada correspondente ao certificado importado.


    N√≥s utilizamos o certificado digital para autenticar a identidade de um indiv√≠duo, uma empresa ou um servidor.
    Ele gera uma seguran√ßa durante as transa√ß√µes de dados eletr√¥nicos, assim sendo, obrigatoriamente necess√°rio para o uso de nossas outras APIs.

    <br>

    ## Sandbox e Produ√ß√£o
    ________________

    > Sandbox: Ambiente de testes.

    O ambiente sandbox √© um ambiente desenvolvido para testes, que operam com dados fict√≠cios. Ele oferece um espa√ßo seguro, sem realizar consultas ou causar impactos em opera√ß√µes e transa√ß√µes reais.
    Isso permite que os desenvolvedores parceiros do C6 Bank realizem simula√ß√µes e fa√ßam os ajustes necess√°rios, antes de prosseguir para o ambiente de produ√ß√£o.

    Este ambiente funciona de segunda √† sexta-feira, das 07h √†s 22h.

    Para solicitar suas credenciais em **Sandbox**, caso n√£o possua uma, [clique aqui](/create-access).

    <br>

    > Produ√ß√£o: Ambiente produtivo.

    O ambiente de produ√ß√£o √© onde as aplica√ß√µes e sistemas do parceiro operam com dados reais, realizando opera√ß√µes e transa√ß√µes via integra√ß√£o.
    Portanto, √© fundamental que os parceiros cumpram todos os requisitos de homologa√ß√£o do C6 Bank antes de colocar sua aplica√ß√£o em produ√ß√£o.

    Neste ambiente, as chaves s√£o geradas dentro do web-banking ao criar as suas credenciais.

    <br>

    ## Como autenticar e realizar requisi√ß√µes em nossas APIs
    ________________

    Para iniciar o processo de autentica√ß√£o, √© necess√°rio importar o certificado digital no seu sistema.

    Clique na guia abaixo para ver o passo a passo de como importar o certificado digital.

    <br>

    <details>
      <summary align="center">üìö <strong>GUIA 1 - IMPORTA√á√ÉO DE CERTIFICADO</strong></summary>

      Passo 1 a 3: Abra o Postman, ou a plataforma que voc√™ utiliza para realizar requisi√ß√µes e v√° at√© o menu de configura√ß√µes.

      ![Passo 1](/images/import-certificates/01.png)

      ![Passo 2](/images/import-certificates/02.png)

      ![Passo 3](/images/import-certificates/03.png)

      Passo 4: V√° at√© a aba de certificados e clique em "Adicionar certificado".

      ![Passo 4](/images/import-certificates/04.png)

      Passo 5: Preencha os campos obrigat√≥rios, como o host e o caminho do certificado digital.

      Abaixo temos o exemplo de preenchimento do campo 'host' para o ambiente de Produ√ß√£o, mas o mesmo processo deve ser seguido para o ambiente de Sandbox, apenas alterando o host, como na imagem seguinte.

      ![Passo 5](/images/import-certificates/05.png)

      Acima temos o host de Produ√ß√£o como exemplo e abaixo o host de Sandbox.

      ![Passo 6](/images/import-certificates/06.png)

      Passo 7 a 9: Importe os arquivos .crt e .key que s√£o enviados em conjunto de suas credenciais, e clique em "Add".

      ![Passo 7](/images/import-certificates/07.png)

      ![Passo 8](/images/import-certificates/08.png)

      ![Passo 9](/images/import-certificates/09.png)

      Passo 10: Pronto! O certificado foi importado com sucesso. Siga para o guia 2 para realizar a autentica√ß√£o.

      ![Passo 10](/images/import-certificates/10.png)
    </details>
    <br>

    ________________

    <br>

    <details>
      <summary align="center">üìñ <strong>GUIA 2 - AUTENTICA√á√ÉO</strong></summary>

      Passo 1: Copie o cUrl disponibilizado nesta pagina.
      ![Passo 01](/images/authenticate-credentials/01.png)

      Passo 2 a 4: Abra a platafomra que voc√™ utiliza para realizar requisi√ß√µes, como o Postman, e importe o cUrl copiado.

      ![Passo 02](/images/authenticate-credentials/02.png)

      ![Passo 03](/images/authenticate-credentials/03.png)

      Passo 4: Copie seu client_id e client_secret enviados em conjunto com suas credenciais.
      ![Passo 04](/images/authenticate-credentials/04.png)

      > username = client_id

      > password = client_secret


      Passo 5: Converta (client_id:client_secret) para base64 e cole no campo de Authorization, conforme o exemplo abaixo.

      ![Passo 05](/images/authenticate-credentials/05.png)

      Passo 6: Remova username:password do campo de Authorization e cole o valor convertido em base64.

      A chave deve ficar dessa forma: Authorization: Basic <valor_codificado_em_Base64>

      ![Passo 06](/images/authenticate-credentials/06.png)

      Passo 7: Clique em "Send" para enviar a requisi√ß√£o.
      Se a resposta retornar o c√≥digo '200 OK', a autentica√ß√£o foi realizada com sucesso.

      <br>

      Utilize o token de acesso (acess_token) retornado na resposta para realizar as demais requisi√ß√µes √†s APIs do C6 Bank.

      ![Passo 07](/images/authenticate-credentials/07.png)

    </details>

    ## Observa√ß√£o
    Antes de realizar qualquer requisi√ß√£o, importe o certificado digital no seu sistema, conforme guia 1.
    A autentica√ß√£o expira ap√≥s 10 minutos de inatividade. Ap√≥s esse tempo, ser√° necess√°rio realizar a autentica√ß√£o novamente.
    Vale destacar tamb√©m que a autentica√ß√£o n√£o precisa ser realizada a cada a√ß√£o, mas somente quando o tempo de expira√ß√£o for atingido.

    <br>

    ## Endere√ßos dos ambientes:
    | Ambiente | Host                                 | Path            |
    |:--------:|------------------------------------- |-----------------|
    | Sandbox  | https://baas-api-sandbox.c6bank.info | /v1/auth/       |
    | Produ√ß√£o | https://baas-api.c6bank.info         | /v1/auth/       |

tags:
  - name: Autenticacao

servers:

  - url: https://baas-api-sandbox.c6bank.info/v1/auth
    description: Ambiente sandbox

  - url: https://baas-api.c6bank.info/v1/auth
    description: Ambiente produtivo

paths:
  /:
    post:
      tags:
        - Autenticacao
      summary: Gerar token de sess√£o
      description: |-
        **Antes de realizar essa etapa, certifique-se de que o certificado digital foi importado.**

        Est√° a√ß√£o √© necess√°ria para gerar um token de sess√£o, permitindo o acesso √†s outras APIs do C6Bank.
      parameters:
        - $ref: '#/components/parameters/Authorization'
        - $ref: '#/components/parameters/ContentType'
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - grant_type
              properties:
                grant_type:
                  type: string
                  description: "'grant type' define o m√©todo pelo qual seu sistema adquirir√° um token de acesso para consumir nossa API."
                  example: "client_credentials"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthenticationResponse'
        '4XX':
          description: Para descri√ß√£o de erros visite a <a href="https://developers.c6bank.com.br/apis/errors">documenta√ß√£o correspondente</a>.
        '5XX':
          description: Para descri√ß√£o de erros visite a <a href="https://developers.c6bank.com.br/apis/errors">documenta√ß√£o correspondente</a>.

      security:
        - authenticationHeader: []

components:
  parameters:
    Authorization:
      in: header
      name: Authorization
      description: |-
        **required**


        Credenciais de autoriza√ß√£o no formato Basic + (usu√°rio:senha convertidos para base 64).
      schema:
        type: string
      example:
        Basic Y2xpZW50X2lkOmNsaWVudF9zZWNyZXQY2xpZW50X2lkOmNsaWVudF9zZWNyZXQY2xpZW50X2lkOmNsaWVudF9zZWNyZXQ

    ContentType:
      in: header
      name: Content-Type
      description: Tipo do conte√∫do da requisi√ß√£o
      schema:
        type: string
      required: true
      example: "application/x-www-form-urlencoded"

  schemas:
    AuthenticationResponse:
      type: object
      properties:
        access_token:
          type: string
          description: Token de acesso. √â sua chave de acesso a qualquer outra API do C6 Bank documentada neste portal. Deve ser mantido em sigilo e preferencialmente n√£o armazenado de maneira persistente. Deve ser usada para liberar o acesso √† outras requisi√ß√µes.
          readOnly: true
          example: TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gRG9uZWMgYXQgcHVsdmluYXIganVzdG8uIFByb2luIGEgbnVuYyBhYyBkdWkgaGVuZHJlcml0IG1hdHRpcyBub24gdml0YWUgdXJuYS4gSW4gZWdldCBlcm9zIGNvbnNlcXVhdCwgbG9ib3J0aXMgbGliZXJvIHF1aXMsIGxhY2luaWEgbmlzbC4gTWF1cmlzIHNlZCBkaWN0dW0gZW5pbS4gRXRpYW0gbmVjIG5pc2kgdmVsaXQuIEludGVnZXIgc2VkIG5lcXVlIGFsaXF1ZXQsIG1hdHRpcyBlcm9zIGVnZXQsIG1vbGxpcyBhcmN1LiBRdWlzcXVlIGludGVyZHVtIHNlbSBhYyB0ZWxsdXMgY29uZ3VlLCBuZWMgZGljdHVtIGxlbyB0aW5jaWR1bnQuIFBoYXNlbGx1cyBpbiBmYWNpbGlzaXMgb3JjaS4gQWVuZWFuIGEgbGFjdXMgdXQgbGVvIHNlbXBlciBhY2N1bXNhbi4gTnVsbGFtIHZlbmVuYXRpcyBjb252YWxsaXMgc2FwaWVuIHF1aXMgZWdlc3Rhcy4=
        expires_in:
          type: integer
          description: Tempo de expira√ß√£o do token (em segundos). Ap√≥s esse per√≠odo, um novo token dever√° ser gerado.
          readOnly: true
          example: 300
        token_type:
          type: string
          description: O token retornado nesta API ser√° sempre em formato "Bearer".
          readOnly: true
          example: Bearer
        scope:
          type: string
          description: Escopos que a chave gerada tem acesso. Estes escopos definem os poderes do portador do access token perante a conta associada.
          readOnly: true
          example: bankslip.write webhook.read pix.read webhook.write pix.write bankslip.read

  securitySchemes:
    authenticationHeader:
      type: http
      scheme: basic

security:
  - authenticationHeader: []
