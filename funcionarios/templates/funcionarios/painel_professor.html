{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">Painel do Professor</h2>
    
    <div class="card shadow-sm p-4">
        <h4>Informações Pessoais</h4>
        <p><strong>Nome:</strong> {{ professor.usuario.first_name }}</p>
        <p><strong>Disciplinas:</strong> {{ professor.disciplinas.all|join:", " }}</p>
        <p><strong>Contato:</strong> {{ professor.usuario.email }}</p>
    </div>

    <div class="card shadow-sm p-4 mt-3">
        <h4>Turmas Atuais</h4>
        {% if professor.turmas.all %}
            <ul>
                {% for turma in professor.turmas.all %}
                    <li><a href="{% url 'detalhes_turma' turma.id %}">{{ turma.nome }}</a></li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">Nenhuma turma atribuída.</p>
        {% endif %}
    </div>

    <div class="card shadow-sm p-4 mt-3">
        <h4>Histórico de Aulas</h4>
        {% if professor.aulas.all %}
            <ul>
                {% for aula in professor.aulas.all|slice:":5" %}
                    <li>{{ aula.data|date:"d/m/Y" }} - {{ aula.turma.nome }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">Nenhum registro de aula.</p>
        {% endif %}
    </div>

    <div class="text-center mt-4">
        {% for turma in professor.turmas.all %}
    <a href="{% url 'registrar_presenca' turma.id %}" class="btn btn-primary">Registrar Presença - {{ turma.nome }}</a>
{% endfor %}

        <a href="{% url 'atualizar_dados_professor' %}" class="btn btn-warning">Atualizar Dados</a>
        <a href="{% url 'logout' %}" class="btn btn-danger">Sair</a>
    </div>
</div>
{% endblock %}