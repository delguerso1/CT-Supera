{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>Registrar Presença - {{ turma.nome }}</h2>
<form method="post">
    {% csrf_token %}
    <p><strong>Data:</strong> {{ hoje }}</p>

    <label><input type="checkbox" id="check_todos"> Marcar todos</label>
    <ul>
        {% for matricula in matriculas %}
            <li>
                <label>
                    <input type="checkbox" name="presenca" value="{{ matricula.id }}" class="check_individual">
                    {{ matricula.aluno.first_name }} ({{ matricula.aluno.username }})
                </label>
            </li>
        {% endfor %}
    </ul>
    <button type="submit" class="btn btn-primary">Registrar Presença</button>
</form>

<script>
    document.getElementById('check_todos').addEventListener('change', function() {
        let checkboxes = document.querySelectorAll('.check_individual');
        checkboxes.forEach(cb => cb.checked = this.checked);
    });
</script>
{% endblock %}
